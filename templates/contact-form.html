<!--
  Construction Sites — Reusable Contact Form
  ============================================
  1. Change the _site_id value to match the client's key in /config/clients.json
  2. Drop this into the client's contact page
  3. The form handles success (#thank-you) and error (#error) states automatically
-->

<!-- Contact Form -->
<div class="contact-form-card" id="contact-form-wrapper">
  <h3 style="font-size:1.3rem;font-weight:800;margin-bottom:6px;">Send Us a Message</h3>
  <p style="font-size:0.87rem;color:#64748b;margin-bottom:28px;line-height:1.7;">Fill in the form below and we'll get back to you as soon as possible.</p>

  <form class="contact-form" action="https://construction-sites.co.uk/api/enquiry" method="POST">
    <!-- Client identifier — change this per site -->
    <input type="hidden" name="_site_id" value="CHANGE-ME">
    <!-- Redirect URL — set to this page's full URL -->
    <input type="hidden" name="_redirect" value="CHANGE-ME">

    <!-- Honeypot spam protection — do not remove -->
    <div style="position:absolute;left:-9999px;top:-9999px;" aria-hidden="true">
      <input type="text" name="_gotcha" tabindex="-1" autocomplete="off">
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="first-name">First Name *</label>
        <input type="text" id="first-name" name="first_name" placeholder="John" required>
      </div>
      <div class="form-group">
        <label for="last-name">Last Name *</label>
        <input type="text" id="last-name" name="last_name" placeholder="Smith" required>
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label for="email">Email *</label>
        <input type="email" id="email" name="email" placeholder="john@example.com" required>
      </div>
      <div class="form-group">
        <label for="phone">Phone *</label>
        <input type="tel" id="phone" name="phone" placeholder="07xxx xxx xxx" required>
      </div>
    </div>
    <div class="form-group">
      <label for="service">Service Required</label>
      <select id="service" name="service">
        <option value="" disabled selected>Select a service...</option>
        <option value="Extension">Extension</option>
        <option value="Disability Adaptation">Disability Adaptation</option>
        <option value="Windows & Doors">Windows &amp; Doors</option>
        <option value="Roofing">Roofing</option>
        <option value="Landscaping">Landscaping</option>
        <option value="Joinery">Joinery</option>
        <option value="Plastering">Plastering</option>
        <option value="Other">Other</option>
      </select>
    </div>
    <div class="form-group">
      <label for="message">Additional Information</label>
      <textarea id="message" name="message" placeholder="Tell us about your project, timeline, and any specific requirements..."></textarea>
    </div>
    <button type="submit" class="btn btn-gold form-submit">Send Enquiry</button>
  </form>

  <!-- Success message (shown when redirected back with #thank-you) -->
  <div id="form-success" style="display:none;text-align:center;padding:48px 24px;">
    <div style="width:64px;height:64px;border-radius:50%;background:rgba(74,222,128,0.12);display:flex;align-items:center;justify-content:center;margin:0 auto 20px;">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#4ade80" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
    </div>
    <h3 style="font-size:1.4rem;font-weight:800;margin-bottom:10px;">Thank You!</h3>
    <p style="font-size:0.95rem;color:#64748b;line-height:1.7;">Your enquiry has been sent successfully. We'll be in touch within 24 hours.</p>
  </div>

  <!-- Error message (shown when redirected back with #error) -->
  <div id="form-error" style="display:none;text-align:center;padding:48px 24px;">
    <div style="width:64px;height:64px;border-radius:50%;background:rgba(239,68,68,0.12);display:flex;align-items:center;justify-content:center;margin:0 auto 20px;">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
    </div>
    <h3 style="font-size:1.4rem;font-weight:800;margin-bottom:10px;">Something Went Wrong</h3>
    <p style="font-size:0.95rem;color:#64748b;line-height:1.7;">We couldn't send your enquiry. Please give us a call instead and we'll be happy to help.</p>
  </div>
</div>

<script>
(function() {
  var hash = window.location.hash;
  if (hash === '#thank-you' || hash === '#error') {
    var form = document.querySelector('#contact-form-wrapper .contact-form');
    var success = document.getElementById('form-success');
    var error = document.getElementById('form-error');
    if (hash === '#thank-you' && form && success) {
      form.style.display = 'none';
      success.style.display = 'block';
    } else if (hash === '#error' && form && error) {
      form.style.display = 'none';
      error.style.display = 'block';
    }
    // Clean up the URL hash
    if (window.history && window.history.replaceState) {
      window.history.replaceState(null, '', window.location.pathname);
    }
  }
})();
</script>
